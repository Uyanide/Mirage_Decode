import{k,i as X,r as j,l as Y,G as J,y as K,j as C,m as z,n as O,o as Q,H as Z,q as tt,p as et,B as nt,T as at,b as ot,J as E}from"./index-Bl150xPo.js";import{l as T,n as st}from"./help-button-DcEIAC8i.js";const U=k("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),S=k("MuiListItemIcon",["root","alignItemsFlexStart"]),H=k("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function rt(t){return X("MuiMenuItem",t)}const M=k("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),it=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},ct=t=>{const{disabled:e,dense:n,divider:a,disableGutters:i,selected:r,classes:c}=t,f=Q({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",a&&"divider",r&&"selected"]},rt,c);return{...c,...f}},lt=z(Z,{shouldForwardProp:t=>tt(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:it})(et(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${M.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${M.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${M.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${M.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${M.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${U.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${U.inset}`]:{marginLeft:52},[`& .${H.root}`]:{marginTop:0,marginBottom:0},[`& .${H.inset}`]:{paddingLeft:36},[`& .${S.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${S.root} svg`]:{fontSize:"1.25rem"}}}]}))),xt=j.forwardRef(function(e,n){const a=Y({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:r="li",dense:c=!1,divider:d=!1,disableGutters:f=!1,focusVisibleClassName:o,role:s="menuitem",tabIndex:p,className:l,...u}=a,h=j.useContext(T),g=j.useMemo(()=>({dense:c||h.dense||!1,disableGutters:f}),[h.dense,c,f]),v=j.useRef(null);J(()=>{i&&v.current&&v.current.focus()},[i]);const x={...a,dense:g.dense,divider:d,disableGutters:f},b=ct(a),m=K(v,n);let w;return a.disabled||(w=p!==void 0?p:-1),C.jsx(T.Provider,{value:g,children:C.jsx(lt,{ref:m,role:s,tabIndex:w,component:r,focusVisibleClassName:O(b.focusVisible,o),className:O(b.root,l),...u,ownerState:x,classes:b})})});function wt({text:t,action:e,aspectRatio:n,onClick:a,disabled:i,styles:r}){return C.jsxs(nt,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",aspectRatio:n??"16/9",backgroundColor:"background.paper",border:"1px dashed",borderColor:"text.secondary",borderRadius:2,...r},children:[C.jsx(at,{variant:"subtitle1",sx:{mb:1,color:"text.secondary"},children:t}),e&&C.jsx(ot,{variant:"contained",onClick:a,disabled:!a||i,children:e})]})}class Mt{canvas=null;srcData=st();unsubscribers=[];bind(e){this.canvas=e}unbind(){this.unsubscribers.forEach(e=>{e()}),this.unsubscribers=[],this.canvas=null}subscribe(e){this.unsubscribers.push(e)}clear(){if(!this.canvas)return;const e=this.canvas.getContext("2d");e&&e.clearRect(0,0,this.canvas.width,this.canvas.height)}setImage(e,n=!0){this.srcData.v=e.imageData,n&&this.putImageData(this.srcData)}hasImage(){return!!this.srcData.v}putImageData(e){if(!this.canvas)return;if(!e.v){this.clear();return}const n=e.v;this.canvas.width=n.width,this.canvas.height=n.height;const a=this.canvas.getContext("2d");if(!a){console.warn("Failed to get canvas context");return}a.putImageData(n,0,0)}}const P=(t,e,n)=>t*.299+e*.587+n*.114,dt=(t,e,n)=>(t+e+n)/3;function ut(t,e,n=P){if(!t.v){e.v=null;return}const a=t.v.data;if(F(t,e),!e.v){console.warn("No buffer available for grayscale conversion");return}const i=e.v.data;for(let r=0;r<t.v.data.length;r+=4){const c=a[r],d=a[r+1],f=a[r+2],o=n(c,d,f);i[r]=o,i[r+1]=o,i[r+2]=o,i[r+3]=a[r+3]}}function pt(t,e,n){if(!e.v){n.v=null;return}const a=e.v.data;if(F(e,n),!n.v){console.warn("No buffer available for contrast adjustment");return}const i=n.v.data,r=(t-50)*5.1,c=259*(r+255)/(255*(259-r));for(let d=0;d<a.length;d+=4)i[d]=Math.min(Math.max(0,c*(a[d]-128)+128),255),i[d+1]=Math.min(Math.max(0,c*(a[d+1]-128)+128),255),i[d+2]=Math.min(Math.max(0,c*(a[d+2]-128)+128),255),i[d+3]=a[d+3]}function _(t,e,n,a){if(!n.v||t===0||e===0||n.v.width===0||n.v.height===0){a.v=null;return}const i=n.v.width,r=n.v.height,c=n.v.data;if(t===i&&e===r){a.v=new ImageData(c.slice(),i,r);return}const d=i/r,f=t/e;let o,s,p=0,l=0;d>f?(s=e,o=Math.max(Math.round(e*d),t),p=Math.floor((o-t)/2)):(o=t,s=Math.max(Math.round(t/d),e),l=Math.floor((s-e)/2));const u=new Uint8ClampedArray(t*e*4);for(let h=0;h<e;++h)for(let g=0;g<t;++g){let v=function(y,A){const R=(A*i+y)*4;return[c[R],c[R+1],c[R+2],c[R+3]]};const x=(g+p)*(i-1)/(o-1),b=(h+l)*(r-1)/(s-1),m=Math.floor(x),w=Math.floor(b),$=Math.min(m+1,i-1),B=Math.min(w+1,r-1),I=x-m,D=b-w,V=v(m,w),N=v($,w),W=v(m,B),q=v($,B);for(let y=0;y<4;++y){const A=(1-I)*(1-D)*V[y]+I*(1-D)*N[y]+(1-I)*D*W[y]+I*D*q[y];u[(h*t+g)*4+y]=Math.round(A)}}a.v=new ImageData(u,t,e)}function ft(t,e,n){if(!e.v||t<=0){n.v=null;return}const{width:a,height:i}=e.v;if(a<=t&&i<=t){n.v=new ImageData(e.v.data.slice(),a,i);return}const r=a/i;let c,d;r>1?(c=t,d=Math.min(Math.round(t/r),t)):(d=t,c=Math.min(Math.round(t*r),t)),_(c,d,e,n)}function F(t,e){if(!t.v){e.v=null;return}const{width:n,height:a}=t.v;e.v!==null&&t.v!==e.v&&n===e.v.width&&a===e.v.height||(e.v=new ImageData(new Uint8ClampedArray(n*a*4),n,a))}const Ct={toGrayAverage:dt,toGrayLum:P,resizeCover:_,resizeFit:ft,toGray:ut,adjustContrast:pt,matchSize:F};var L={exports:{}},vt=L.exports,G;function mt(){return G||(G=1,function(t,e){(function(n,a){a()})(vt,function(){function n(o,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function a(o,s,p){var l=new XMLHttpRequest;l.open("GET",o),l.responseType="blob",l.onload=function(){f(l.response,s,p)},l.onerror=function(){console.error("could not download file")},l.send()}function i(o){var s=new XMLHttpRequest;s.open("HEAD",o,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function r(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(s)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof E=="object"&&E.global===E?E:void 0,d=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(o,s,p){var l=c.URL||c.webkitURL,u=document.createElement("a");s=s||o.name||"download",u.download=s,u.rel="noopener",typeof o=="string"?(u.href=o,u.origin===location.origin?r(u):i(u.href)?a(o,s,p):r(u,u.target="_blank")):(u.href=l.createObjectURL(o),setTimeout(function(){l.revokeObjectURL(u.href)},4e4),setTimeout(function(){r(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,s,p){if(s=s||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(n(o,p),s);else if(i(o))a(o,s,p);else{var l=document.createElement("a");l.href=o,l.target="_blank",setTimeout(function(){r(l)})}}:function(o,s,p,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof o=="string")return a(o,s,p);var u=o.type==="application/octet-stream",h=/constructor/i.test(c.HTMLElement)||c.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||u&&h||d)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var m=v.result;m=g?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=m:location=m,l=null},v.readAsDataURL(o)}else{var x=c.URL||c.webkitURL,b=x.createObjectURL(o);l?l.location=b:location.href=b,l=null,setTimeout(function(){x.revokeObjectURL(b)},4e4)}});c.saveAs=f.saveAs=f,t.exports=f})}(L)),L.exports}var gt=mt();const bt={"image/png":"png","image/jpeg":"jpg"};function It(t,e){const n=new Blob([t.buffer],{type:e||"application/octet-stream"}),a=bt[e]||"bin",i=`output_${new Date().toISOString().replace(/[:.]/g,"-")}.${a}`;return gt.saveAs(n,i),i}export{wt as C,Ct as I,xt as M,Mt as P,It as s};
